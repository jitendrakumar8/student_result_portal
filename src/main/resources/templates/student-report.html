<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Student Report Card</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f5f7fa;
        }
        .report-header {
            background: #212529;
            color: #fff;
            padding: 15px;
            border-radius: 5px;
        }
        .summary-box {
            font-size: 18px;
            font-weight: 600;
        }
    </style>
</head>

<body>

<!-- ðŸ”¹ Navbar -->
<nav class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
        <span class="navbar-brand">Student Result Portal</span>
        <a href="/admin/dashboard" class="btn btn-outline-light">â¬… Back to Dashboard</a>
    </div>
</nav>

<div class="container mt-4">

    <!-- ðŸ”¹ Page Title -->
    <h3 class="text-center mb-4">Student-wise Report Card</h3>

    <!-- ðŸ”¹ FILTER FORM -->
    <form method="post" action="/admin/student-report" class="card shadow p-4 mb-4">

        <div class="row g-3">

            <!-- Class -->
            <div class="col-md-3">
                <label class="form-label">Class</label>
                <select id="classSelect" name="className" class="form-select" required>
                    <option value="">Select Class</option>
                    <option th:each="c : ${classList}"
                            th:value="${c}"
                            th:text="${c}">
                    </option>
                </select>
            </div>

            <!-- Section -->
            <div class="col-md-3">
                <label class="form-label">Section</label>
                <select id="sectionSelect" name="section" class="form-select" required>
                    <option value="">Select Section</option>
                    <option th:each="s : ${sectionList}"
                            th:value="${s}"
                            th:text="${s}">
                    </option>
                </select>
            </div>

            <!-- Student -->
            <div class="col-md-4">
                <label class="form-label">Student</label>
                <select id="studentSelect" name="studentId" class="form-select" required>
                    <option value="">Select Student</option>
                    <option th:each="stu : ${students}"
                            th:value="${stu.id}"
                            th:text="${stu.rollNumber + ' - ' + stu.name}">
                    </option>
                </select>
            </div>

            <!-- Exam -->
            <div class="col-md-2">
                <label class="form-label">Exam Type</label>
                <select name="examType" class="form-select">
                    <option value="HALF_YEARLY">Half Yearly</option>
                    <option value="ANNUAL">Annual</option>
                </select>
            </div>

        </div>

        <div class="text-center mt-4">
            <button class="btn btn-primary px-4">View Report</button>
        </div>

    </form>

    <!-- ðŸ”¹ REPORT CARD -->
    <div th:if="${student}" class="card shadow">

        <!-- Header -->
        <div class="report-header text-center">
            <h4 th:text="${student.name}"></h4>

            <p>
                Class: <b th:text="${student.className}"></b> |
                Section: <b th:text="${student.section}"></b> |
                Roll No: <b th:text="${student.rollNumber}"></b>
            </p>
            <p>Exam: <b th:text="${examType}"></b></p>
        </div>

        <div class="card-body">

            <!-- Marks Table -->
            <table class="table table-bordered text-center">
                <thead class="table-dark">
                <tr>
                    <th>Subject</th>
                    <th>Marks Obtained</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="m : ${marksList}">
                    <td th:text="${m.subjectName}"></td>
                    <td th:text="${m.marksObtained}"></td>
                </tr>
                </tbody>
            </table>

            <!-- Summary -->
            <!-- Summary -->
            <div class="row text-center mt-4 g-3">

                <div class="col-md-3">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h6>Class Rank</h6>
                            <h4 class="text-primary" th:text="${rank}"></h4>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h6>Total Marks</h6>
                            <h4 th:text="${totalMarks}"></h4>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h6>Percentage</h6>
                            <h4>
                                <span th:text="${#numbers.formatDecimal(percentage,0,2)}"></span>%
                            </h4>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h6>Grade</h6>
                            <h4 class="text-success" th:text="${grade}"></h4>
                        </div>
                    </div>
                </div>

            </div>

            <!--
        </div>
        <div class="row text-center mt-4">

            <div class="col-md-4 summary-box">
                    <h5>Class Rank: <span th:text="${rank}"></span></h5>
            </div>
            <div class="col-md-4 summary-box">
                Total Marks: <span th:text="${total}"></span>
            </div>


            <div class="col-md-4 summary-box">
                Percentage: <span th:text="${percentage}"></span>%
            </div>

            <div class="col-md-4 summary-box">
                Grade: <span th:text="${grade}"></span>
            </div>
        </div>-->

 </div>
</div>
<script src="/js/report-dropdown.js"></script>

 </body>
</html>
